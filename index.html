<!DOCTYPE html>
<html>
<head>
<title>Object graph visualization with a level of detail</title>
<script src="Drawing.js"></script>
  <script src="http://d3js.org/d3.v4.min.js" type="text/javascript"></script>
  <script src="http://d3js.org/d3-selection-multi.v1.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
  <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/ui-lightness/jquery-ui.css" type="text/css"
    media="all" />
<script>

        var begin;
        var end;
        var lifeSpanLength;
        var draw = new draw ();
        var probability;
        var compositeStructure;


    function Filter() {
      console.log("draw ", draw);
      $("#mainNav").show();
      document.getElementById("filterButton").style.color = "red";
      probability = document.getElementById("probability").value;
      lifeSpanLength = document.getElementById("lifesoanLength").value;
      if (document.getElementById('compositeStructure').checked) {
        compositeStructure = true;
      }
      draw.refresh(begin, end, probability, lifeSpanLength, compositeStructure);
      // alert(begin+","+end+"|"+probability+"|"+lifeSpanLength);
    }
        
</script>

<style>
    body {
        display: grid;
        grid-template-areas: "header header header" "nav article ads" "footer footer footer";
        grid-template-rows: 0px 1fr 130px;
        grid-template-columns: 20% 79%;
        grid-gap: 1px;
        height: 100vh;
        margin: 0;
    }

    #pageHeader {
        grid-area: header;
    }

    #pageFooter {
        grid-area: footer;
    }

    #mainArticle {
        grid-area: article;
    }

    #mainNav {
        grid-area: nav;
    }

    #siteAds {
        grid-area: ads;
    }

    header,
    nav {
        padding: 20px;
        background: rgb(116, 115, 110);
    }

    footer {
        background: rgb(75, 74, 74);
    }

    node {}

    .link {
      stroke: #999;
      stroke-opacity: 5.6;
      stroke-width: 1px;
    }
</style>
</head>
<body>

    <article id="mainArticle">
        
            <svg width="2000" height="800" scrolling="yes" ></svg>
     
    </article>
    <nav id="mainNav" style= "display:none"> 
        <!-- composite structure is shown in this panel --> 
        <!-- an svg must be added here --> 
    </nav>

    <footer id="pageFooter" height="300">
        <center>
            <div style="display:inline">
                <div>Lifespan range: </div>
                <div id="slider-range" style="width: 150px; margin-left:10%; margin-right:10%;"></div>
                <div id="textSlider">[0%, 100%]</div>
            </div>
            &nbsp; &nbsp;
            <div style="display:inline">
                <div style="display:inline"> Lifespan length:
                    <input id="lifesoanLength" type="text" >
                </div>
                <div style="display:inline"> Probability value:
                    <input id="probability" type="number" step="0.1" value="not indicated" min="0" max="1" />
                </div>
                <div style="display:inline">
                    <input id="compositeStructure" type="checkbox" name="checkbox" value="unchecked"> Collapse composite structures
                </div>
            </div>
            <input id="filterButton" type="button" value="Filter !" onclick="Filter()" style="width: 100px; height: 40px">
        </center>
    </footer>
<script>
  
    $(function () {
      $("#slider-range").slider({
        range: true,
        min: 0,
        max: 100,
        values: [0, 100],
        slide: function (event, ui) {
          begin = d3.min([ui.values[0], 100]);
          end = d3.max([ui.values[1], 0]);
          console.log("begin:", begin, "end:", end);
          $("#textSlider").text("[" + begin + "%, " + end + "%]");       
          Filter();
        }
      });
    });
  
    draw.initilization();
</script>
</body>
</html>
